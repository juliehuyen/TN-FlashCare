flowchart LR
  subgraph Frontend
    A[Web & Mobile Apps]
  end

  subgraph GatewayCluster
    G[API Gateway]
  end

  subgraph CoreServices
    P[PatientService]
    T[TriageService]
    Q[QueueService]
    C[ConsultationService]
    E[ExamResultsService]
    R[PrescriptionService]
    H[ChatService]
    F[ReportGenerationService]
  end

  subgraph Infrastructure
    DB[(Patient BDD)]
    FS[(File BDD)]
    BDDQ[(Queue BDD)]
    LLM[(LLM Engine)]
    WH[(Whisper)]
    V[(Vidal)]

  end

  A -->|REST / WS| G
  G --> P
  G --> T
  G --> Q
  G --> H
  G --> F
  G --> C
  G --> E
  G --> R

  Q --> BDDQ
  H -->|génération| LLM
  H --> DB
  P --> DB


  T -->|lire dossier| P
  T --> LLM
  C -->|résumé| LLM

  E --> DB
  R --> DB
  R -->|explication| LLM

  F --> DB
  T --> Q
  F --> C 
  F --> E
  F --> R
  C -->|audio| WH

  C --> FS
  F --> FS

  R --> V
